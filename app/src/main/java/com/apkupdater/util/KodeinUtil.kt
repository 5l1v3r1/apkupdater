package com.apkupdater.util

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

import com.apkupdater.activity.MainActivity
import com.apkupdater.adapter.UpdaterAdapter
import com.apkupdater.model.AppState
import com.github.salomonbrys.kodein.Kodein
import com.github.salomonbrys.kodein.bind
import com.github.salomonbrys.kodein.conf.global
import com.github.salomonbrys.kodein.singleton

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

class KodeinUtil
{
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	companion object
	{
		////////////////////////////////////////////////////////////////////////////////////////////////////////////////

		fun init(
		) {
			Kodein.global.mutable = true
			Kodein.global.clear()
		}

		////////////////////////////////////////////////////////////////////////////////////////////////////////////////

		fun addAppStateSingleton(
			appState : AppState
		) {
			Kodein.global.addConfig {
				bind<AppState>() with singleton { appState }
			}
		}

		////////////////////////////////////////////////////////////////////////////////////////////////////////////////

		fun addMyBusSingleton(
			bus : MyBus
		) {
			Kodein.global.addConfig {
				bind<MyBus>() with singleton { bus }
			}
		}

		////////////////////////////////////////////////////////////////////////////////////////////////////////////////

		fun addLogUtilSingleton(
			logger : LogUtil
		) {
			Kodein.global.addConfig {
				bind<LogUtil>() with singleton { logger }
			}
		}

		////////////////////////////////////////////////////////////////////////////////////////////////////////////////

		fun addActivitySingleton(
			activity : MainActivity
		) {
			Kodein.global.addConfig {
				bind<MainActivity>() with singleton { activity }
			}
		}

		////////////////////////////////////////////////////////////////////////////////////////////////////////////////

		fun addUpdaterAdapterSingleton(
			adapter : UpdaterAdapter
		) {
			Kodein.global.addConfig {
				bind<UpdaterAdapter>() with singleton { adapter }
			}
		}

		////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////